#ifndef PUBLISHER_HPP
#define PUBLISHER_HPP

#include <osapi/MsgQueue.hpp>
#include <osapi/Thread.hpp>
#include <osapi/ThreadFunctor.hpp>
#include <osapi/Timer.hpp>

class Publisher : public osapi::ThreadFunctor
{
public:
  Publisher();
  ~Publisher();
private:
  void handleTimeOutMsg();
  void handleMsg(unsigned long id, osapi::Message* msg);
  virtual void run();

  bool                 running_;
  osapi::MsgQueue      mq_;
  osapi::ITimerId*     timer_;
  
  enum { ID_TIME_OUT,
         ID_TERMINATE 
  };

  enum { TIMEOUT = 1000 };
};


#endif
